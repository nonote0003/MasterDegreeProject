function [y1] = ANN_qe(x1)
%ANN_QE neural network simulation function.
%
% Auto-generated by MATLAB, 02-May-2023 00:29:57.
% 
% [y1] = ANN_qe(x1) takes these arguments:
%   x = 6xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0];
x1_step1.gain = [2;2;2;2;2;2];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.4572475024836299973;2.2624165979847896679;0.75717397537113995121;-0.71704241725991368916;0.70221592246913944191;-1.5857102182459281714;3.7213633747139889252];
IW1_1 = [-2.1768880977584861292 2.031314252812148613 1.6137050240478030272 2.9578254061925024487 -0.59675953221623501133 -0.93977559163451362956;-0.71017850647742697401 0.034808335454056024694 -2.1885069533623289217 2.8423945415830149663 -1.1242312521591828478 1.7309984097130013403;-2.1606436742525372274 -0.72672982406866593053 0.77426240783739674889 3.7580065187990454589 -4.8849200891529944712 -1.6473413271884647102;-3.0236665697000715269 -0.15675446349703064941 2.5387100888585498737 -0.16200870239412717977 0.76503980392247483699 2.5256301634720217386;0.092678095023982387524 -1.7025821214943344106 1.6943448471135769129 -0.40440589104420687772 -2.2243078392257595866 -2.6397359945950937821;-2.2157472229241830242 0.73850510795591295388 -2.3559666147984712481 1.5384886324405357971 1.6267304057651066351 -2.1530378847526248087;1.7778885007898126425 -0.72498022794230043697 -2.000811077712933983 3.0511457474554313229 0.90311113730375613962 2.7706171882901662329];

% Layer 2
b2 = [-11.840071377044353085;8.7214219284999376924;2.4552832227350207539;7.062336346426983269;-1.7356338595503968403;-3.2842831868325594868;-0.80867531235177037008];
LW2_1 = [3.9402149312846148632 3.7765287675037888526 0.42538165744939160362 1.7809536092962030551 3.9846384225772699672 -1.8719167973501176228 0.99600817824654408472;-2.6330218678155059564 -2.6335861649284399988 -2.7452367396467591831 0.32146988818124000442 -4.870412846694251563 2.2771902098401222148 -3.2321487960920141091;-1.108683790103364375 -3.678215594324730553 5.3410817333751205993 -2.8819441247356092362 -2.5696841859903463146 -0.44512412620610519731 3.7073437868281517993;-6.0644053807465407857 -3.0157752806712014859 -0.82658018468632987741 -1.8874339626906864176 -1.4839913479563509036 -0.65378337459307800383 -4.1455400068980754469;4.1120040441331067171 2.7226632324329371748 0.61786617051675996048 4.2404200017698761016 0.27595443282261311602 -1.7983770410520492078 -2.8464548294011935425;4.1714297176648429399 4.1412415681424370462 1.5313120779291176099 2.19910004910999346 -2.525444596727192792 1.4144501947152317012 1.6742861372133539533;-3.9025975902561382824 1.2083963434446194363 2.519225695779536256 -0.052319318842206238851 -1.6275466386418209197 0.77583835233714659729 -5.4328502080917084882];

% Layer 3
b3 = [-5.081179862782715162;-4.8872458305616435226;2.8193236325380071072;-0.15369152407404368388;-6.5949658128266168688;3.318782235193586061;-8.2525118399644021849];
LW3_2 = [4.7131207540447785931 -3.4933210355659882751 4.5307798577856361888 2.617509331274841422 -2.3727278297388409989 1.3349038850173404747 -0.10045509881255121343;1.8276317101084826877 2.7606857983585624261 4.6743283167180473825 -1.9941582350205344643 -0.87339579818416501755 2.1057511581617101015 -4.0237194816933588015;0.038686413720893403356 -1.2653687968024631694 -2.9344742971210089344 3.3647181316597500889 5.2170916272605030173 -0.89839664338142610767 -0.64807613378058337439;4.4966819541700742136 -1.746179102609537015 -2.1770518352896708336 3.848684395822222104 1.100411468364836276 -3.6806801723527029502 0.2122301338248168967;-0.87218865915558529966 2.8907341775240342763 2.5252744204111872151 4.5337205203202000092 3.47109158889838465 0.76303246397951118851 -2.8240365793900386038;3.6065322404660955513 -1.3230427820917998183 2.9349139663572429981 -1.4499846317760398673 0.998839566349840835 -3.4255876604409141173 -4.132399260864282553;-0.13618874003150885366 2.9971796672119888072 3.2454076359117527417 -2.002368601276510951 -1.4276243403507451468 3.7597700699945710845 4.2686684056191896985];

% Layer 4
b4 = [-8.2592486399835038924;4.2326578322885302086;-5.7888832394002420756;-1.9492659968293994943;6.7461111036986789458;6.9667588397059576621;-2.9996412885358560985];
LW4_3 = [0.1919564626858627221 -3.5046621822409345093 0.81322703675689611558 2.7528123803707358341 5.0341571544198959742 0.50452755959429218535 0.11018824701251776765;-0.61902546802186508845 1.753350109876357088 -4.4863256778200071295 1.4722315165561243866 -4.7938845289435407793 -0.35667527240670193756 2.104987395970340458;3.3210938777211236328 4.1013703419996110355 1.8307041714336078631 0.3312241891828520135 -1.4265259620257297879 -2.6184173945800104377 4.1272201246372333117;5.7266565157297435462 -2.1384206245376531363 0.1048210434642095068 2.186878070225478865 1.7456146624815034318 -0.70996907432388645098 -3.2136041638007721843;-2.2077119701231624482 -4.166170579964592946 -1.9851990783914548189 2.5570293503632903764 -2.6461823762834977281 -1.4336974446085994916 -4.3074579830701926753;-1.2194973352808839984 -2.0492373885989008109 -3.7699191608821793764 -3.3739556944389375026 -1.6437070371722437567 -3.0800292197070997524 -2.7370601343873337541;2.3812755187462273376 1.8151766875603150275 2.9270068266131206158 3.8344430070096500174 3.7509712937546151323 1.2057933189989296086 -2.5976605535463965779];

% Layer 5
b5 = [-5.6469968969300454731;-0.75536762772689569623;0.89035520294471359737;0.95928134325814651273;3.9886409260235899943;-4.4869616537153662605;7.1241705995477255797];
LW5_4 = [1.060671593154669079 3.1749508586345607242 -1.1664541625173752148 -3.2048665482196159182 -2.9604988062958246253 3.1866435909112378333 2.9752063987509194121;-0.80771576203992423437 2.6353604163129005222 2.4585250974529837542 -3.6368498757527731868 0.54738078299324544052 3.2916640050771275305 4.1325513237084754437;-2.8325624926667059 2.8795116755582617074 1.6556577355070294377 -2.2676672337579217853 4.2274986345196765569 -3.7885593320518426985 -0.75901867783524046285;3.5919014958092692069 0.27939306249311701702 -2.1811086189267232527 1.003405342957200963 -2.9490365177898802962 -5.4343877164212770481 1.0697619861625493609;4.5338713893905158159 0.66006098441685401301 -2.2232493750560791135 -1.1001744538881124136 -5.6804455613379429835 -0.41896047379923573306 -1.3148279480807751884;1.8390298605769779261 2.9673452393671611027 3.3484552433004597383 3.6039807908467085262 0.81531627337441459069 -3.0392304106109366835 1.5584250047550536333;2.553477289001508499 -0.94554207557764480274 -4.1273316689005126179 3.2422452956602736407 -2.3427250333733451448 -2.7669528851212641385 -2.5844507972830794706];

% Layer 6
b6 = [3.2878467267013173903;9.8215681893523516521;-2.3447255637120458793;-2.8043778868156477024;-2.4451417718769929976;-1.8343876257232558658;3.495196146414648819];
LW6_5 = [0.23933983906452296897 -1.1138125558003262316 -0.44221567404603123741 -2.4641704147118441703 -4.9249549430959005392 -4.7312378778354959863 -0.96784056831680731481;-0.67238451180622438308 -2.807290186302934476 -2.7550218118274107937 -4.0324620986108765663 -5.1060717546149936297 2.2592930797230601492 -0.58042886643059243834;1.6604831942259654642 -1.5510483375653902893 4.3386387540402004959 -3.7382312622970563787 2.6161962041065698337 3.4814986278357307192 -0.90182107346547157878;3.2875002546087133126 0.27542795713401241331 4.1787316898861979197 -3.420606270922170733 -1.7841969011563172387 -0.59769566233120496879 3.808503208812557439;-0.37506815575813218233 3.1551058858988652034 -5.6195961879421592045 -0.48533792213135190652 2.3557250706296923859 -1.6773763460955062321 1.8667147872086069516;-2.0640134295061267622 3.5889796411916865537 -3.922529714595655026 -1.387389916444013549 -0.19194018297822923458 3.0952973744387852761 -3.3392905092198827965;-0.24644778211868753615 -3.6339689466931144324 -1.893214839320885412 -3.464823314293562273 1.4408042468759796328 -2.2803263923198087149 -4.3066813269379231599];

% Layer 7
b7 = [-0.56257003773701030891;-0.38969697342361170334];
LW7_6 = [-0.2184870030258760365 1.3278501336291681501 0.70741543370869619523 -0.48642569340499702824 -0.34507166129004313015 -0.42752446635389146357 -0.17591208155740625796;-0.25633083426948416461 0.062566890590085119661 1.8068352314745694809 -1.2985746670452704699 1.5472521817498354757 0.069035622560416814997 0.41117188401711929346];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.39273441335297;1.25778252940067];
y1_step1.xoffset = [0.0771;0.0082];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = logsig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = logsig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = logsig_apply(repmat(b4,1,Q) + LW4_3*a3);

% Layer 5
a5 = logsig_apply(repmat(b5,1,Q) + LW5_4*a4);

% Layer 6
a6 = logsig_apply(repmat(b6,1,Q) + LW6_5*a5);

% Layer 7
a7 = repmat(b7,1,Q) + LW7_6*a6;

% Output 1
y1 = mapminmax_reverse(a7,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n,~)
  a = 1 ./ (1 + exp(-n));
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
